<div class="container d-flex mt-5">
  <div class="row p-3">
    <%= render @courses %>
  </div>
    <aside>
        <div class="mt-2 border p-3">
          <div class="mt-2">
            <h4>Categorías</h4>
              <ul class="list-group">
                <% @courses.each do |course| %>
                  <li class="list-group-item list-group-item-reduced d-flex justify-content-between align-items-center">
                    <div>
                    <input class="form-check-input me-1" type="checkbox" value="">
                    <label class="form-check-label" for="firstCheckbox"><%= course.category.capitalize%></label>
                    </div>
                    <span class="badge text-secondary"><%= @courses.select { |c| c.category == course.category }.size %></span>
                  </li>
                <% end %>
              </ul>
          </div>
          <div class="mt-3">
            <h4>Autoras</h4>
              <ul class="list-group">
                <% authors = @courses.map { |course| [course.user.first_name, course.user.last_name] }.uniq %>
                <% authors.each do |first_name, last_name| %>
                  <li class="list-group-item list-group-item-reduced d-flex justify-content-between align-items-center">
                    <div>
                      <input class="form-check-input me-1" type="checkbox" value="">
                      <label class="form-check-label" for="firstCheckbox"><%= "#{first_name} #{last_name}" %></label>
                    </div>
                    <span class="badge text-secondary"><%= @courses.select { |course| course.user.first_name == first_name && course.user.last_name == last_name }.size %></span>
                  </li>
                <% end %>
              </ul>
          </div>
          <div class="mt-3">
            <h4>Precio</h4>
            <ul class="list-group">
              <% free_courses = @courses.select { |course| course.price.nil? } %>
              <li class="list-group-item list-group-item-reduced d-flex justify-content-between align-items-center">
                <div>
                  <input class="form-check-input me-1" type="checkbox" value="">
                  <label class="form-check-label" for="firstCheckbox">Gratis</label>
                </div>
                <span class="badge text-secondary"><%= free_courses.size %></span>
              </li>
              </li>
              <li class="list-group-item list-group-item-reduced d-flex justify-content-between align-items-center">
                <div>
                <input class="form-check-input me-1" type="checkbox" value="">
                <label class="form-check-label" for="firstCheckbox">Pagado</label>
                </div>
                <span class="badge text-secondary"><%= @courses.reject { |course| course.price.nil? }.size %></span>
              </li>
            </ul>
          </div>
          <div class="mt-3">
            <h4>Rating</h4>
              <ul class="list-group">
                <li class="list-group-item list-group-item-reduced">
                  <input class="form-check-input me-1" type="radio" name="listGroupRadio" value=""  checked>
                  <label class="form-check-label" for="firstRadio">¡ <%= raw '<i class="fa-solid fa-star" style="color: #FFD43B;"></i>' * 5 %> !</label>
                </li>
                  <% 1.upto(4) do |i| %>
                    <li class="list-group-item list-group-item-reduced">
                      <input class="form-check-input me-1" type="radio" name="listGroupRadio" value="<%= i %>">
                      <label class="form-check-label" for="radio<%= i %>">
                        <% i.times do %>
                          <i class="fa-solid fa-star" style="color: #FFD43B;"></i>
                        <% end %>
                        <% (5 - i).times do %>
                          <i class="fa-regular fa-star" style="color: #FFD43B;"></i>
                        <% end %>
                      </label>
                    </li>
                  <% end %>
              </ul>
          </div>
          <div class="mt-3 d-flex justify-content-evenly">
            <a href="" class="btn btn-flat">FILTER</a>
            <a href="" class="btn btn-flat">RESET</a>
          </div>
        </div>
        <div class="mt-3">
          <h4> Últimos Cursos </h4>
          <ul class="list-group">
            <% @courses.last(3).each do |course| %>
                <div class="last-courses-container p-3 d-flex justify-content-between">
                  <div class="row">
                    <div class="col-6">
                      <a href="<%= course_path(course) %>"><%= image_tag(course.photo, alt: course.name, style: "width:90px;height:90px; border-radius:10px") %></a>              </li>
                    </div>
                    <div class="col-6">
                      <a class="text-decoration-none text-black" href="<%= course_path(course) %>"><strong><%= course.name %></strong></a>
                      <div><a class="text-decoration-none text-black" href="<%= course_path(course) %>"><strong><%= course.price %></strong></a></div>
                    </div>
                  </div>
                </div>
            <% end %>
        </div>
    </aside>
</div>
